# v2.1.0 Release Notes

## Summary
This release introduces a major enhancement by adding support for the JSON Lines (`.jsonl`) format for storing timers. This allows for richer timer data, including titles and descriptions. The default timer file has been changed to `.timers.jsonl` to enable this feature by default. Additionally, CI workflows have been improved to ensure better code quality and stability.

## Added
- **JSON Lines Support**: Timers can now be stored in a `.jsonl` file, allowing each timer to be a rich JSON object. This is now the default format.
- **Richer Timer Data**: The `createTimer` method now accepts optional `title` and `description` arguments, which are stored when using a `.jsonl` file. The `Timer` type has been updated to include these optional fields.
- **CI Workflow for Testing**: A new GitHub Actions workflow has been added to automatically run tests on every push to the `main` branch.

## Changed
- **Default Timer File**: The default file for storing timers has been changed from `.timers` to `.timers.jsonl`. The previous plain-text format is still supported if the filename does not end with `.jsonl`.
- **`createTimer` Method Signature**: The `createTimer` method has been updated to `createTimer(length: number, title?: string, description?: string): Promise<string>`.
- **Improved Timer Checking**: The `checkTimers` method now includes a locking mechanism to prevent concurrent executions, improving reliability.
- **CI Workflow Enhancement**: The `publish.yml` workflow has been updated to include Node.js setup and dependency installation steps.

## Removed
- The `.npmignore` file has been removed (I moved `dist/.tsbuildinfo` to `.cache/ts/.tsbuildinfo`)

## Breaking Changes
- **Default Timer File Path**: The default timer storage file is now `.timers.jsonl`. Users who relied on the default `.timers` file will need to either rename their file to `.timers.jsonl` or explicitly provide the old path to the `TimersManager` constructor to continue using their existing timers.

## Migration Notes
- To upgrade from a previous version and continue using your existing timers, you have two options:
  1. **Rename the timer file**: Rename your existing `.timers` file to `.timers.jsonl`. Note that the format will be automatically handled, but new timers will be stored as JSON objects, and old plain-text timers will still be readable. For consistency, a manual migration to JSON Lines format is recommended.
  2. **Specify the file path**: Explicitly pass the path to your old timer file when creating a `TimersManager` instance: 
     ```javascript
     const manager = new TimersManager('path/to/your/.timers');
     ```

## Notes
- **Choosing a Storage Format**: While the default is now the feature-rich `.jsonl` format, the traditional plain-text format is still fully supported. You can continue to use it by specifying a file path without a `.jsonl` extension.
- **Benefit of Plain-text**: The plain-text format is more lightweight as it avoids JSON parsing, which may offer slightly better performance in high-frequency timer operations.
- **Limitation of Plain-text**: If you use the plain-text format, you cannot store `title` or `description` for your timers.
